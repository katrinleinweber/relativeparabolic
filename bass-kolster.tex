The next theorem is a relative version of the so called Bass---Kolster decomposition (cf.~\cite[Theorem~2.1]{St78}).
\begin{thm}\label{thm:BassKolster}
Let $\Phi$ be a classical root system of rank $\ell\geqslant2$, let $R$ be arbitary commutative ring and $I$ be an ideal, satisfying one of the following assumptions:
\newline \indent \begin{tabular}{l l l}      
\textbullet & $\Phi = \rA_\ell$, $\ell\geq 2$, & $\sr(I) \leqslant \ell$; \\     
\textbullet & $\Phi = \rC_\ell$, $\ell\geq 2$, & $\sr(I) \leqslant 2\ell-1$; \\ 
\textbullet & $\Phi = \rB_\ell$, $\rD_\ell$ $\ell\geq 3$,  & $\asr(I) \leqslant \ell-1$. \end{tabular}

\noindent Then the principal congruence subgroup $\G(\Phi,R,I)$ admits the following relative version of Bass---Kolster decomposition:
\[\G(\Phi,R,I)=  \G(\Delta_1,R,I)\cdot \U(\Sigma_1,I)\cdot \U(\Sigma_1^-\setminus\{-\alpha_\mathrm{max}\},I)\cdot\Z \cdot \U(\Phi^-,I)\cdot \U(\Phi^+,I), \]
where $\Z=\left\{ z_{-\alpha_\mathrm{max}}(r,1)\mid r\in I \right\}$.
\end{thm}
\begin{proof}

Let $g$ be an element of $\G(\Phi, R, I)$. Set $v=g \cdot v^+\in\Ums(n, I)$. 
Notice that in each of the cases it suffices to find $g' \in \U(\Phi^-, I) \cdot \U(\Phi^+, I) \cdot g$ such that 
\begin{equation} \label{eq1} (g'\cdot v^+)_{1} = 1 + s \text{ and } (g'\cdot v^+)_{\varpi\ssub{1}-\alpha\ssub{max}} = s\ \text{for some}\ s\in I. \end{equation}
Indeed, set $g'' = z_{-\alpha\ssub{max}}(-s, 1) \cdot g'$.
Obviously, one has $(g''\cdot v^+)_1 = 1$, $(g''\cdot v^+)_{\varpi\ssub{1}-\alpha\ssub{max}}=0$ and the conclusion of the theorem follows from Lemma~\ref{lemma:Chevalley-Matsumoto}.

\textsc{Case $\Phi=\rA_\ell$, $n=\ell + 1$:}
%Set $v=(1+v_1,v_2,\ldots,v_\ell,v_{\ell+1})^t\in\Ums(\ell+1,R,I)$.
Thanks to the relative stable rank condition one can add suitable multiples of the last component $v_{\ell+1}$ to the first $\ell$ components of $v$ so that the upper
$\ell$ coefficients of the resulting vector $v'$ form an $I$-unimodular column of length $\ell$.
Now multiplying $v'$ by a suitable $y\in \U(\Sigma_\ell^-, I)$ we obtain equalities~\ref{eq1}.

\textsc{Case $\Phi=\rC_\ell$, $n=2\ell$:}
Notice that column $(v_1,\ldots, v_{-2}, v_{-1}^2)^t$ is also $I$-unimodular.
Applying condition $\sr(I)\leq 2\ell-1$ we find $c_1, c_2, \ldots, c_{-2} \in I \cdot v_{-1}$ such that upper $2\ell -1$ components of $v'=(v_1 + c_1 v_{-1}, \ldots, v_{-2} + c_{-2}v_{-1}, v_{-1})^t$ form an $I$-unimodular column.
By the choice of $c_i$ we can find suitable $d\in I$ such that $h_1 \cdot v = v'$ for $h_1 = t_{1,-1}(c_1 + d) \cdot \prod_{i=2}^{-2} t_{i,-1}(c_i) \in \U(\Sigma_\ell, I)$.

We can find $f_1, f_2,\ldots, f_{-2} \in R$ such that $f_1v'_1+\sum_{i=2}^{-2} f_i v'_i = 1$.
Set $\xi = v''_1-v''_{-1}-1 \in I$, $h_2 = \prod_{i=1}^{-2} t_{-1,i}(\xi \cdot f_i) \in \U(\Sigma_\ell, I)$.
Now it is clear that $v'' = h_2 \cdot v'$ satisfies equalities~\ref{eq1}.

%Now we can assume that the first $2\ell-1$ entries of $v$ are unimodular and find $c_1,\ldots,c_{-2}\in I$ such that $c_1v_1+\ldots+c_{-2}v_{-2}=(v_1-1)-v_{-1}$. Add $c_{-i}v_i$ to $v_{-1}$, $i=2,\ldots,\ell$:
%\[ (v_1,v_2\ldots,v_\ell,v_{-\ell},\ldots,v_{-2},v_{-1})^t\longmapsto (v_1,v'_2\ldots,v'_\ell,v_{-\ell},\ldots,v_{-2},v'_{-1})^t. \]
%Then add $c_iv_i'=c_i(v_1+c_{-i}v_{-i})$, $i=2,\ldots,\ell$ to the last entry:
%\[ v_1\longmapsto v_1,\quad v'_{-1}\longmapsto v_{-1}+\sum_{i=2}^\ell c_{-i}v_{-i}+\sum_{i=2}^\ell c_i(v_i+c_{-i}v_1)=v''_{-1}. \]
%Next add $\left(c_1-\sum_{i=2}^\ell c_ic_{-i}\right)v_1$ to $v''_{-1}$ to get $v_1-1$ in position $-1$.
%Again, as in case of $\rA_n$, apply $z_\gamma(1-v_1,1)$ with $\gamma=-\alpha_\mathrm{max}$, to get $1$ as the first entry and $0$ as the last.

\textsc{Case $\Phi=\rD_\ell$, $n= 2\ell$.} 
By Lemma~\ref{lemma:asrUnip} we can find $h_1\in \U(\Sigma^+_\ell, I)$ such that the upper half $v'_+$ of $v'=h_1 \cdot v$ is $I$-unimodular.
Since $\sr(I)\leq \ell-1$ we can find $c_1$, $c_3, \ldots c_\ell \in I$ such that $(v''_1, v''_3, \ldots, v''_\ell) \in \Ums(\ell-1, I)$, where
$v''=h_2 \cdot t_{1,2}(c_1) \cdot v'$, $h_2=\prod_{i=3}^\ell t_{i,2}(c_i)$.

We can find $f_1, f_3,\ldots, f_\ell \in R$ such that $f_1v''_1+\sum_{i=3}^\ell f_i v''_{i} = 1$.
As before, set $\xi = v''_1-v''_{-2}-1 \in I$, $h_3 = t_{1,-2}(\xi f_1) \cdot \prod_{i=3}^\ell t_{i,-2}(\xi f_i)$, $v'''=h_3 \cdot v''$.
%Clearly, $v'''_{-2}=v'''_1-1$, therefore for $v_4 = z_{-\alpha_{max}}(-v'''_{-2}, 1) \cdot v'''$ one has $v^4_1 = 1$, as required.
Clearly, $t_{1,2}(c_1) \cdot h_1 \in \U(\Phi^+, I)$, while $ h_3 \cdot h_2 \in \U(\Phi^-, I)$.

\textsc{Case $\Phi=\rB_\ell$, $n=2\ell+1$:} Subdivide $v\in \Ums(2\ell+1, I)$ as $v=(v_+, v_0, v_-)\in R^\ell\times R\times R^\ell$.
Denote by $J\leq I$ the ideal spanned by components of $v_-$.
Since $\sr(I/J)\leq \ell$ we can find $c_1,\dots,c_\ell\in I$ such that for $v' = h \cdot v$, $h = \prod_{i=1}^\ell t_{i, 0}(c_i) \in \U(\Phi^+, I)$
one has $\bar{v'}_+=(\bar{v'_1},\ldots, \bar{v'_\ell}) \in \Ums(\ell, I/J)$ and, therefore, $(v'_+, v'_-) \in \Ums(2\ell, I)$.
Now the proof can be finished by repeating the argument for the case $\Phi=\rD_l$ (applied to the subset of long roots of $\rB_\ell$).
%(clearly, the maximal root of $\rD_\ell$ maps to the maximal root of $\rB_\ell$ under the natural embedding $\rD_\ell\subseteq\rB_\ell$). 
\end{proof}

Using standard elementary calculations we can decrease the number of elementary root unipotents involved in the decomposition of the previous theorem.

\begin{cor}
In the assumptions and notation of Theorem~\ref{thm:BassKolster} one can write
\[\G(\Phi,R,I)=  \G(\Delta_1,R,I)\cdot \U(\Sigma_1,I)\cdot \U(\Sigma_1^-,I)\cdot\Z \cdot \U(\Sigma^-_1,I)\cdot \U(\Sigma_1, I).\]
\end{cor}

