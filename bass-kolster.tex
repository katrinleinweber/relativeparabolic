\begin{thm}\label{thm:BassKolster}
Let $\Phi$ be a classical root system of rank $\geqslant2$, let $R$ be arbitary commutative ring and $I$ be an ideal, satisfying the following assumption:
\begin{itemize}
\item $\Phi=\rA_\ell$: $\sr(I)\leqslant\ell$,
\item $\Phi=\rB_\ell$: $\asr(R,I)\leqslant\ell-1$,
\item $\Phi=\rC_\ell$: $\sr(I)\leqslant2\ell-1$,
\item $\Phi=\rD_\ell$: $\asr(R,I)\leqslant\ell-1$.
\end{itemize}
Then the principal congruence subgroup $\G(\Phi,R,I)$ admits the following relative version of Bass---Kolster decomposition:
\[\G(\Phi,R,I)=\U(\Sigma^+,I)\ \U(\Sigma^-,I)\cdot \Z\cdot \U(\Sigma^-,I)\ \U(\Sigma^+,I)\cdot \G(\Delta,R,I), \]
where $\Sigma^\pm=\Phi^\pm\setminus\Delta$ and $\Z=\left\{ z_{-\alpha_\mathrm{max}}(r,1)\mid r\in I \right\}$.
\end{thm}
\begin{proof}
Let $g$ be an element of $\G(\Phi, R, I)$ and $e_1$ be the highest weight vector of the standard vector representation of $\G(\Phi, R, I)$.
It is clear that vector $v=g\cdot e_1$ is $I$-unimodular.
%TODO: Mention Chevalley---Matsumoto lemma in the introduction
In view of Chevalley---Matsumoto lemma it suffices to show that $\Z \cdot \U(\Phi^-, I) \cdot \U(\Phi^+, I) \cdot g$ contains an element $g$ whose matrix entry at position $(1,1)$ is equal to $1$.
We will need to analyze several cases.

\textsc{Case $\Phi=\rA_\ell$:}
Denote $v=(1+r_1,r_2,\ldots,r_\ell,r_{\ell+1})^t\in\Ums(\ell+1,R,I)$.
One can add the last entry to the first $\ell$ with some coefficients from $I$ to make then form a unimodular column of length $\ell$.
Then $\ell$ lower transformations (with coefficients from $I$) can make the last entry equal $r_1$.
Now apply $z_\gamma(-r_1,1)$, $\gamma=-\alpha_{\max}$:
\begin{multline*}
(1+r_1,r_2,\ldots,r_\ell,r_1)^t\xmapsto{x_{-\gamma}(-1)}(1,r_2,\ldots,r_\ell,r_1)^t\xmapsto{x_\gamma(-r_1)}\\\longmapsto(1,r_2,\ldots,r_\ell,0)^t\xmapsto{x_{-\gamma}(1)}(1,r_2,\ldots,r_\ell,0)^t.
\end{multline*}
Now $\ell-1$ lower transformations eliminates all the remaining entries in the first column, while $\ell$ more upper ones will make the first row trivial.

\textsc{Case $\Phi=\rC_\ell$:}
Denote $v=(v^+,v^-)^t\in\Ums(2\ell,R,I)$. Find $c_1,\ldots,c_{-2}\in I$ such that $(v_1+c_1v_{-1},\ldots,v_{-2}+c_{-2}v_{-1})=(v_1',\ldots,v_{-2}')$ is unimodular.

First add $c_{-i}v_{-1}$ to $v_{-i}$ for $-i=-\ell,\ldots,-2$, this will also add something to $v_1$.

Then add $c_iv_{-1}$ to $v_i$ for $i=2,\ldots,\ell$. So far we have made the entries from $i=2,\ldots,-2$ equal to $v_i+c_iv_{-1}$, and one more upper transformation (corresponding to the highest root) will make the first entry equal to $v_1+c_1v_{-1}$ (note that the coefficient for that addition lies in $I$).

Now we can assume that the first $2\ell-1$ entries of $v$ are unimodular and find $c_1,\ldots,c_{-2}\in I$ such that $c_1v_1+\ldots+c_{-2}v_{-2}=v_1-v_{-1}$. Add $c_{-i}v_i$ to $v_{-1}$, $i=2,\ldots,\ell$:
\[ (v_1,v_2\ldots,v_\ell,v_{-\ell},\ldots,v_{-2},v_{-1})^t\longmapsto (v_1,v'_2\ldots,v'_\ell,v_{-\ell},\ldots,v_{-2},v'_{-1})^t. \]
Then add $c_iv_i'=c_i(v_1+c_{-i}v_{-i})$, $i=2,\ldots,\ell$ to the last entry:
\[ v_1\longmapsto v_1,\quad v'_{-1}\longmapsto v_{-1}+\sum_{i=2}^\ell c_{-i}v_{-i}+\sum_{i=2}^\ell c_i(v_i+c_{-i}v_1)=v''_{-1}. \]
Next add $\left(c_1-\sum_{i=2}^\ell c_ic_{-i}\right)v_1$ to $v''_{-1}$ to get $v_1$ in position $-1$. Again, as in case of $\rA_n$, apply $z_\gamma(-v_1,1)$ with $\gamma=-\alpha_\mathrm{max}$, to get $1$ as the first entry and $0$ as the last.

Now apply $2\ell-2$ lower transformation to obtain zeroes on positions $i=2,\ldots,-2$, that will also add $\sum_{i=2}^\ell (v_i+v_{-i})$ to $v_{-1}$,
so by one more transformation one can make the first column trivial. 
The same can be done with the first row, so in total we used $8\ell-3$ transformations.

\textsc{Case $\Phi=\rD_\ell$.} 
By Lemma~\ref{lemma:asrUnip} we can find $h_1\in \U(\Sigma^+_\ell, I)$ such that the upper half $v'^+$ of vector $v'=h_1\cdot v$ is $I$-unimodular.
Since $\sr(I)\leq \ell-1$ we can find $c_1$, $c_3, \ldots c_\ell \in I$ such that $(v''_1, v''_3, \ldots, v''_\ell) \in \Ums(\ell-1, R, I)$, where
$v''=h_2 \cdot t_{1,2}(c_1) \cdot v'$, $h_2=\prod\limits_{i=3}^\ell t_{i,2}(c_i)$.

We can find $f_1, f_3,\ldots, f_\ell \in R$ such that $f_1v''_1+\sum\limits_{i=3}^\ell f_i v''_{i} = 1$.
Set $\xi = v''_1-v''_{-2}-1 \in I$, $h_3 = t_{1,-2}(\xi f_1) \cdot \prod\limits_{i=3}^\ell t_{i,-2}(\xi f_i)$, $v'''=h_3 \cdot v''$.
Clearly, $v'''_{-2}=v'''_1-1$, therefore for $v_4 = z_{-\alpha_{max}}(-v'''_{-2}, 1) \cdot v'''$ one has $v^4_1 = 1$, as required.
On the other hand, $t_{1,2}(c_1) \cdot h_1 \in \U(\Phi^+, I)$, while $ h_3 \cdot h_2 \in \U(\Phi^-, I)$.

\textsc{Case $\Phi=\rB_\ell$:} Subdivide $v\in \Ums(2\ell+1, R, I)$ as $v=(v^+, v_0, v^-)\in R^\ell\times R\times R^\ell$.
Denote by $J\leq I$ the ideal spanned by components of $v^-$.
Since $\sr(I/J)\leq l$ we can find $c_1,\dots,c_\ell\in I$ such that for $v' = h \cdot v$, $h = \prod\limits_{i=1}^\ell t_{0, i}(c_i) \in \U(\Phi^+, I)$
one has $\bar{v'}^+=(\bar{v'_1},\ldots, \bar{v'_\ell}) \in \Ums(\ell, R/J, I/J)$ and, therefore, $(v'^+, v'^-) \in \Ums(2\ell, R, I)$.
Now one can finish the proof by repeating the argument for the case $\Phi=\rD_l$.
(clearly, the maximal root of $\rD_\ell$ maps to the maximal root of $\rB_\ell$ under the natural embedding $\rD_\ell\subseteq\rB_\ell$). \end{proof}